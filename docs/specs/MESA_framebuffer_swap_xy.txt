Name

    MESA_framebuffer_swap_xy

Name Strings

    GL_MESA_framebuffer_swap_xy

Contact

    Cici Ruan <ruanc@chromium.org>

Contributors

    Cici Ruan, Google
    Kristian Kristensenâ€Ž, Google
    Fritz Koenig, Google
    Rob Clark, Google
    Chad Versace, Google

Status

    Proposal

Version

    Last Modified Date: April 8, 2020
    Revision: 1

Number

    OpenGL Extension 549
    OpenGL ES Extension 328

Dependencies

    Requires OpenGL ES 3.1, OpenGL 4.3 or ARB_framebuffer_no_attachments.

Overview

    This extension defines a new framebuffer parameter,
    GL_FRAMEBUFFER_SWAP_XY_MESA, that changes the behavior of the reads and
    writes to the framebuffer attachment points. When
    GL_FRAMEBUFFER_SWAP_XY_MESA is GL_TRUE, render commands and pixel transfer
    operations access the backing store of each attachment point with an
    xy-swapped coordinate system. This xy-inversion is relative to the
    coordinate system set when GL_FRAMEBUFFER_SWAP_XY_MESA is GL_FALSE.

    Access through TexSubImage2D and similar calls will notice the effect of
    the swap because GL_FRAMEBUFFER_SWAP_XY_MESA is associated with the 
    framebuffer object.

    When working with glViewport, glScissor, etc, the values for width and
    height should be updated base on the new display size. The new display
    width and height are original height and width if
    GL_FRAMEBUFFER_SWAP_XY_MESA is GL_TRUE.

    When working with extension FRAMEBUFFER_DEFAULT_WIDTH and
    FRAMEBUFFER_DEFAULT_HEIGHT for ARB_framebuffer_no_attachments,
    the values for FRAMEBUFFER_DEFAULT_WIDTH and FRAMEBUFFER_DEFAULT_HEIGHT are
    original width and height.

    This extension is mainly for pre-rotation and recommended to use it with
    MESA_framebuffer_flip_x and MESA_framebuffer_flip_y to have rotated
    result on user framebuffer.
    
    Rotation_0:
        GL_FRAMEBUFFER_FLIP_X_MESA = GL_FALSE
        GL_FRAMEBUFFER FLIP_Y_MESA = GL_FALSE
        GL_FRAMEBUFFER_SWAP_XY_MESA = GL_FALSE
    
    Rotation_90:
        GL_FRAMEBUFFER_FLIP_X_MESA = GL_FALSE
        GL_FRAMEBUFFER FLIP_Y_MESA = GL_TRUE
        GL_FRAMEBUFFER_SWAP_XY_MESA = GL_TRUE
    
    Rotation_180:
        GL_FRAMEBUFFER_FLIP_X_MESA = GL_TRUE
        GL_FRAMEBUFFER FLIP_Y_MESA = GL_TRUE
        GL_FRAMEBUFFER_SWAP_XY_MESA = GL_FALSE
    
    Rotation_270:
        GL_FRAMEBUFFER_FLIP_X_MESA = GL_TRUE
        GL_FRAMEBUFFER FLIP_Y_MESA = GL_FALSE
        GL_FRAMEBUFFER_SWAP_XY_MESA = GL_TRUE

IP Status

    None

Issues

    None

New Procedures and Functions

    None

New Types

    None

New Tokens

    Accepted by the <pname> argument of FramebufferParameteri and
    GetFramebufferParameteriv:

        GL_FRAMEBUFFER_SWAP_XY_MESA                      0x8BBD

    Interactions with OpenGL ES 3.1 and any other versions and
    extensions that provide the entry points FramebufferParameteri
    and GetFramebufferParameteriv.

    Token GL_FRAMEBUFFER_SWAP_XY_MESA is accepted as the <pname> argument of
    FramebufferParameteri and GetFramebufferParameteriv.

Errors

    INVALID_VALUE is generated by FramebufferParameteri if <pname> is
    MESA_framebuffer_flip_x and <param> is neither GL_FALSE nor GL_TRUE.

    INVALID_OPERATION is generated by FramebufferParameteri and
    GetFramebufferParameteriv if the default framebuffer is bound to <target>
    and <pname> is GL_FRAMEBUFFER_SWAP_XY_MESA.

    INVALID_ENUM is generated by GetFramebufferParameteriv if
    MESA_framebuffer_swap_xy extension is not enabled and <pname> is
    GL_FRAMEBUFFER_SWAP_XY_MESA.

Revision History

    Version 1, 2020/04/08
      - Initial draft (Cici Ruan)
